{"remainingRequest":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\components\\search\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\components\\search\\index.vue","mtime":1710063488045},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgdXNlclNlcnZpY2UgZnJvbSAnLi4vLi4vYXBpL3VzZXInCmltcG9ydCBmaWxlU2VydmljZSBmcm9tICcuLi8uLi9hcGkvZmlsZScKaW1wb3J0IHsgbWFwTXV0YXRpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdTZWFyY2gnLAogICAgY29tcG9uZW50czoge30sCiAgICBwcm9wczogewogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2VhcmNoS2V5OiAnJwogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLi4ubWFwTXV0YXRpb25zKHsKICAgICAgICAgICAgcmVsb2FkRmlsZUxpc3Q6ICdmaWxlL3NldEZpbGVMaXN0JywKICAgICAgICAgICAgcmVzZXRGaWxlVHlwZXM6ICdmaWxlL3NldEZpbGVUeXBlcycsCiAgICAgICAgICAgIGNoYW5QYWdlOiAnbmF2YmFyL2NoYW5nZU5hdkJhcicsCiAgICAgICAgICAgIGFkZEJyZWFkQ3J1bWJJdGVtOiAnYnJlYWRjcnVtYi9hZGRJdGVtJywKICAgICAgICAgICAgY2xlYXJCcmVhZENydW1iOiAnYnJlYWRjcnVtYi9jbGVhcicsCiAgICAgICAgICAgIHNldFNlYXJjaEZsYWc6ICdmaWxlL3NldFNlYXJjaEZsYWcnLAogICAgICAgICAgICByZWZyZXNoUGFyZW50SWQ6ICdmaWxlL3JlZnJlc2hGaWxlUGFyZW50SWQnLAogICAgICAgICAgICByZXNldFNlYXJjaEtleTogJ2ZpbGUvc2V0U2VhcmNoS2V5JwogICAgICAgIH0pLAogICAgICAgIHF1ZXJ5U2VhcmNoSGlzdG9yeShxdWVyeVN0cmluZywgY2IpIHsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICB1c2VyU2VydmljZS5zZWFyY2hIaXN0b3JpZXMocmVzID0+IHsKICAgICAgICAgICAgICAgIGNiKHJlcy5kYXRhKQogICAgICAgICAgICB9LCByZXMgPT4gewogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBkb1NlYXJjaCgpIHsKICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpcwogICAgICAgICAgICAvLyDorr7nva5GaWxlVHlwZXMKICAgICAgICAgICAgX3RoaXMucmVzZXRGaWxlVHlwZXMoJy0xJykKICAgICAgICAgICAgLy8g6K6+572u5pCc57Si5qih5byPCiAgICAgICAgICAgIF90aGlzLnNldFNlYXJjaEZsYWcodHJ1ZSkKICAgICAgICAgICAgLy8g6Lez6L2s5YiwRmlsZXPpobXpnaIKICAgICAgICAgICAgX3RoaXMuY2hhblBhZ2UoJ0ZpbGVzJykKICAgICAgICAgICAgLy8g57yT5a2Y5pCc57Si5YWz6ZSu5a2XCiAgICAgICAgICAgIF90aGlzLnJlc2V0U2VhcmNoS2V5KF90aGlzLnNlYXJjaEtleSkKICAgICAgICAgICAgZmlsZVNlcnZpY2Uuc2VhcmNoKHsKICAgICAgICAgICAgICAgIGtleXdvcmQ6IF90aGlzLnNlYXJjaEtleSwKICAgICAgICAgICAgICAgIGZpbGVUeXBlczogJy0xJwogICAgICAgICAgICB9LCByZXMgPT4gewogICAgICAgICAgICAgICAgX3RoaXMuY2xlYXJCcmVhZENydW1iKCkKICAgICAgICAgICAgICAgIF90aGlzLmFkZEJyZWFkQ3J1bWJJdGVtKHsKICAgICAgICAgICAgICAgICAgICBpZDogX3RoaXMuZGVmYXVsdFBhcmVudElkLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLmRlZmF1bHRQYXJlbnRGaWxlbmFtZQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF90aGlzLmFkZEJyZWFkQ3J1bWJJdGVtKHsKICAgICAgICAgICAgICAgICAgICBpZDogJy0xJywKICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5pCc57Si77yaJyArIF90aGlzLnNlYXJjaEtleQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIF90aGlzLnJlbG9hZEZpbGVMaXN0KHJlcy5kYXRhKQogICAgICAgICAgICB9LCByZXMgPT4gewogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTZWxlY3QoaXRlbSkgewogICAgICAgICAgICB0aGlzLnNlYXJjaEtleSA9IGl0ZW0udmFsdWUKICAgICAgICAgICAgdGhpcy5kb1NlYXJjaCgpCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwR2V0dGVycyhbJ2RlZmF1bHRQYXJlbnRJZCcsICdkZWZhdWx0UGFyZW50RmlsZW5hbWUnLCAnY2FjaGVTZWFyY2hLZXknXSkKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMucmVmcmVzaFBhcmVudElkKCkKICAgICAgICB0aGlzLnNlYXJjaEtleSA9IHRoaXMuY2FjaGVTZWFyY2hLZXkKICAgIH0sCiAgICB3YXRjaDoge30KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/search","sourcesContent":["<template>\n    <div class=\"pan-main-search-content\">\n        <el-autocomplete\n                class=\"pan-main-search\"\n                v-model=\"searchKey\"\n                placeholder=\"请输入内容\"\n                size=\"small\"\n                @keyup.enter.native=\"doSearch\"\n                :fetch-suggestions=\"querySearchHistory\"\n                @select=\"handleSelect\"\n        >\n            <i slot=\"prefix\" class=\"el-input__icon el-icon-search\"></i>\n        </el-autocomplete>\n    </div>\n</template>\n\n<script>\n\n    import userService from '../../api/user'\n    import fileService from '../../api/file'\n    import { mapMutations, mapGetters } from 'vuex'\n\n    export default {\n        name: 'Search',\n        components: {},\n        props: {\n        },\n        data() {\n            return {\n                searchKey: ''\n            }\n        },\n        methods: {\n            ...mapMutations({\n                reloadFileList: 'file/setFileList',\n                resetFileTypes: 'file/setFileTypes',\n                chanPage: 'navbar/changeNavBar',\n                addBreadCrumbItem: 'breadcrumb/addItem',\n                clearBreadCrumb: 'breadcrumb/clear',\n                setSearchFlag: 'file/setSearchFlag',\n                refreshParentId: 'file/refreshFileParentId',\n                resetSearchKey: 'file/setSearchKey'\n            }),\n            querySearchHistory(queryString, cb) {\n                let _this = this\n                userService.searchHistories(res => {\n                    cb(res.data)\n                }, res => {\n                    _this.$message.error(res.message)\n                })\n            },\n            doSearch() {\n                let _this = this\n                // 设置FileTypes\n                _this.resetFileTypes('-1')\n                // 设置搜索模式\n                _this.setSearchFlag(true)\n                // 跳转到Files页面\n                _this.chanPage('Files')\n                // 缓存搜索关键字\n                _this.resetSearchKey(_this.searchKey)\n                fileService.search({\n                    keyword: _this.searchKey,\n                    fileTypes: '-1'\n                }, res => {\n                    _this.clearBreadCrumb()\n                    _this.addBreadCrumbItem({\n                        id: _this.defaultParentId,\n                        name: _this.defaultParentFilename\n                    })\n                    _this.addBreadCrumbItem({\n                        id: '-1',\n                        name: '搜索：' + _this.searchKey\n                    })\n                    _this.reloadFileList(res.data)\n                }, res => {\n                    _this.$message.error(res.message)\n                })\n            },\n            handleSelect(item) {\n                this.searchKey = item.value\n                this.doSearch()\n            }\n        },\n        computed: {\n            ...mapGetters(['defaultParentId', 'defaultParentFilename', 'cacheSearchKey'])\n        },\n        mounted() {\n            this.refreshParentId()\n            this.searchKey = this.cacheSearchKey\n        },\n        watch: {}\n    }\n</script>\n\n<style>\n\n    .pan-main-search-content {\n        position: absolute;\n        right: 35px;\n        height: 60px;\n        padding: 20px 0 0 13px;\n    }\n\n    .pan-main-search-content .pan-main-search {\n        width: 250px;\n    }\n\n    .pan-main-search-content .pan-main-search input {\n        border-radius: 30px;\n    }\n\n</style>"]}]}