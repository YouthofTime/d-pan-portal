{"remainingRequest":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\utils\\http.js","dependencies":[{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\utils\\http.js","mtime":1710063488607},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIENyZWF0ZWQgYnkgcnViaW4gb24gMjAyMC82LzQuCiAqLwondXNlIHN0cmljdCc7CgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IF9NZXNzYWdlMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9tZXNzYWdlLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX01lc3NhZ2UgZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZSI7CmltcG9ydCBfTWVzc2FnZUJveDIgZnJvbSAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvbWVzc2FnZS1ib3guY3NzIjsKaW1wb3J0ICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9iYXNlLmNzcyI7CmltcG9ydCBfTWVzc2FnZUJveCBmcm9tICJlbGVtZW50LXVpL2xpYi9tZXNzYWdlLWJveCI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGNsZWFyVG9rZW4sIGdldFRva2VuIH0gZnJvbSAnLi9jb29raWUnOwppbXBvcnQgcGFuVXRpbCBmcm9tICcuL2NvbW1vbic7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7Cgp2YXIgdG9Mb2dpbiA9IGZ1bmN0aW9uIHRvTG9naW4oKSB7CiAgLy8gdG8gcmUtbG9naW4KICBfTWVzc2FnZUJveC5jb25maXJtKCfmgqjpnIDopoHph43mlrDnmbvpmYYnLCAn56Gu6K6k6YCA5Ye655m75b2VJywgewogICAgY29uZmlybUJ1dHRvblRleHQ6ICfph43mlrDnmbvpmYYnLAogICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICB0eXBlOiAnd2FybmluZycKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIGNsZWFyVG9rZW4oKTsKICAgIHN0b3JlLmNvbW1pdCgnZmlsZS9jbGVhcicpOwogICAgc3RvcmUuY29tbWl0KCdicmVhZGNydW1iL2NsZWFyJyk7CiAgICBzdG9yZS5jb21taXQoJ25hdmJhci9jbGVhcicpOwogICAgc3RvcmUuY29tbWl0KCd1c2VyL2NsZWFyJyk7CiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgfSk7Cn0sCiAgICBodHRwID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwYW5VdGlsLmdldFVybFByZWZpeCgpLAogIHRpbWVvdXQ6IDEwMDAgKiA2MCwKICBoZWFkZXJzOiB7CiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcKICB9Cn0pOwoKaHR0cC5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChjb25maWcuZGF0YSkgewogICAgY29uZmlnLmRhdGEgPSBKU09OLnN0cmluZ2lmeShjb25maWcuZGF0YSk7CiAgfQoKICB2YXIgdG9rZW4gPSBnZXRUb2tlbigpOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIF9NZXNzYWdlLmVycm9yKCfor7fmsYLlpLHotKUnKTsKCiAgcmV0dXJuOwp9KTsKaHR0cC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSAxMCkgewogICAgdG9Mb2dpbigpOwogICAgcmVzLmRhdGEubWVzc2FnZSA9ICfmgqjpnIDopoHph43mlrDnmbvpmYYnOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5kYXRhKTsKICB9CgogIGlmIChyZXMuZGF0YS5zdGF0dXMgIT09IDApIHsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuZGF0YSk7CiAgfQoKICByZXR1cm4gcmVzLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIF9NZXNzYWdlLmVycm9yKCfor7fmsYLlpLHotKUnKTsKCiAgcmV0dXJuOwp9KTsKZXhwb3J0IGRlZmF1bHQgaHR0cDs="},{"version":3,"sources":["E:/software/download/r-pan-scaffolding-master/r-pan-scaffolding-master/r-pan-portal/src/utils/http.js"],"names":["axios","clearToken","getToken","panUtil","store","toLogin","confirm","confirmButtonText","cancelButtonText","type","then","commit","window","location","reload","http","create","baseURL","getUrlPrefix","timeout","headers","interceptors","request","use","config","data","JSON","stringify","token","error","response","res","status","message","Promise","reject"],"mappings":"AAAA;;;AAIA;;;;;;;;;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,UAArC;AAEA,OAAOC,OAAP,MAAoB,UAApB;AACA,OAAOC,KAAP,MAAkB,UAAlB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAY;AACpB;AACA,cAAWC,OAAX,CAAmB,SAAnB,EAA8B,QAA9B,EAAwC;AACpCC,IAAAA,iBAAiB,EAAE,MADiB;AAEpCC,IAAAA,gBAAgB,EAAE,IAFkB;AAGpCC,IAAAA,IAAI,EAAE;AAH8B,GAAxC,EAIGC,IAJH,CAIQ,YAAM;AACVT,IAAAA,UAAU;AACVG,IAAAA,KAAK,CAACO,MAAN,CAAa,YAAb;AACAP,IAAAA,KAAK,CAACO,MAAN,CAAa,kBAAb;AACAP,IAAAA,KAAK,CAACO,MAAN,CAAa,cAAb;AACAP,IAAAA,KAAK,CAACO,MAAN,CAAa,YAAb;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,GAXD;AAYH,CAdL;AAAA,IAeIC,IAAI,GAAGf,KAAK,CAACgB,MAAN,CAAa;AAChBC,EAAAA,OAAO,EAAEd,OAAO,CAACe,YAAR,EADO;AAEhBC,EAAAA,OAAO,EAAE,OAAO,EAFA;AAGhBC,EAAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAHO,CAAb,CAfX;;AAuBAL,IAAI,CAACM,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACpC,MAAIA,MAAM,CAACC,IAAX,EAAiB;AACbD,IAAAA,MAAM,CAACC,IAAP,GAAcC,IAAI,CAACC,SAAL,CAAeH,MAAM,CAACC,IAAtB,CAAd;AACH;;AACD,MAAIG,KAAK,GAAG1B,QAAQ,EAApB;;AACA,MAAI0B,KAAJ,EAAW;AACPJ,IAAAA,MAAM,CAACJ,OAAP,CAAe,eAAf,IAAkCQ,KAAlC;AACH;;AACD,SAAOJ,MAAP;AACH,CATD,EASG,UAAAK,KAAK,EAAI;AACR,WAAQA,KAAR,CAAc,MAAd;;AACA;AACH,CAZD;AAcAd,IAAI,CAACM,YAAL,CAAkBS,QAAlB,CAA2BP,GAA3B,CAA+B,UAAAQ,GAAG,EAAI;AAClC,MAAIA,GAAG,CAACN,IAAJ,CAASO,MAAT,KAAoB,EAAxB,EAA4B;AACxB3B,IAAAA,OAAO;AACP0B,IAAAA,GAAG,CAACN,IAAJ,CAASQ,OAAT,GAAmB,SAAnB;AACA,WAAOC,OAAO,CAACC,MAAR,CAAeJ,GAAG,CAACN,IAAnB,CAAP;AACH;;AACD,MAAIM,GAAG,CAACN,IAAJ,CAASO,MAAT,KAAoB,CAAxB,EAA2B;AACvB,WAAOE,OAAO,CAACC,MAAR,CAAeJ,GAAG,CAACN,IAAnB,CAAP;AACH;;AACD,SAAOM,GAAG,CAACN,IAAX;AACH,CAVD,EAUG,UAAAI,KAAK,EAAI;AACR,WAAQA,KAAR,CAAc,MAAd;;AACA;AACH,CAbD;AAeA,eAAed,IAAf","sourcesContent":["/**\n * Created by rubin on 2020/6/4.\n */\n\n'use strict'\n\nimport axios from 'axios'\nimport { clearToken, getToken } from './cookie'\nimport { MessageBox, Message } from 'element-ui'\nimport panUtil from './common'\nimport store from '../store'\n\nconst toLogin = function () {\n        // to re-login\n        MessageBox.confirm('您需要重新登陆', '确认退出登录', {\n            confirmButtonText: '重新登陆',\n            cancelButtonText: '取消',\n            type: 'warning'\n        }).then(() => {\n            clearToken()\n            store.commit('file/clear')\n            store.commit('breadcrumb/clear')\n            store.commit('navbar/clear')\n            store.commit('user/clear')\n            window.location.reload()\n        })\n    },\n    http = axios.create({\n        baseURL: panUtil.getUrlPrefix(),\n        timeout: 1000 * 60,\n        headers: {\n            'Content-Type': 'application/json;charset=utf-8'\n        }\n    })\n\nhttp.interceptors.request.use(config => {\n    if (config.data) {\n        config.data = JSON.stringify(config.data)\n    }\n    let token = getToken()\n    if (token) {\n        config.headers['Authorization'] = token\n    }\n    return config\n}, error => {\n    Message.error('请求失败')\n    return\n})\n\nhttp.interceptors.response.use(res => {\n    if (res.data.status === 10) {\n        toLogin()\n        res.data.message = '您需要重新登陆'\n        return Promise.reject(res.data)\n    }\n    if (res.data.status !== 0) {\n        return Promise.reject(res.data)\n    }\n    return res.data\n}, error => {\n    Message.error('请求失败')\n    return\n})\n\nexport default http\n"]}]}