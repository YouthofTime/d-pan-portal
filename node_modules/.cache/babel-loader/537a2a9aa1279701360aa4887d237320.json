{"remainingRequest":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\components\\buttons\\rename-button\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\components\\buttons\\rename-button\\index.vue","mtime":1710063487688},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovc29mdHdhcmUvZG93bmxvYWQvci1wYW4tc2NhZmZvbGRpbmctbWFzdGVyL3ItcGFuLXNjYWZmb2xkaW5nLW1hc3Rlci9yLXBhbi1wb3J0YWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgZmlsZVNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vYXBpL2ZpbGUnOwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmVuYW1lQnV0dG9uJywKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAgcm91bmRGbGFnOiBCb29sZWFuLAogICAgY2lyY2xlRmxhZzogQm9vbGVhbiwKICAgIHNpemU6IFN0cmluZywKICAgIGl0ZW06IE9iamVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlbmFtZVJ1bGVzOiB7CiAgICAgICAgZmlsZW5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlrDmlofku7blkI3np7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgcmVuYW1lRm9ybTogewogICAgICAgIGZpbGVJZDogJycsCiAgICAgICAgZmlsZW5hbWU6ICcnCiAgICAgIH0sCiAgICAgIHJlbmFtZURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyh7CiAgICByZWxvYWRGaWxlTGlzdDogJ2ZpbGUvbG9hZEZpbGVMaXN0JwogIH0pKSwge30sIHsKICAgIHJlbmFtZUZpbGU6IGZ1bmN0aW9uIHJlbmFtZUZpbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuaXRlbSkgewogICAgICAgIF90aGlzLnJlbmFtZUZvcm0uZmlsZUlkID0gX3RoaXMuaXRlbS5maWxlSWQ7CiAgICAgICAgX3RoaXMucmVuYW1lRm9ybS5maWxlbmFtZSA9IF90aGlzLml0ZW0uZmlsZW5hbWU7CiAgICAgICAgX3RoaXMucmVuYW1lRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIV90aGlzLm11bHRpcGxlU2VsZWN0aW9uIHx8IF90aGlzLm11bHRpcGxlU2VsZWN0aW9uLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeimgemHjeWRveWQjeeahOaWh+S7ticpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChfdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5sZW5ndGggPiAxKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeS4gOS4quaWh+S7tui/m+ihjOmHjeWRveWQjScpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gX3RoaXMubXVsdGlwbGVTZWxlY3Rpb25bMF07CiAgICAgIF90aGlzLnJlbmFtZUZvcm0uZmlsZUlkID0gaXRlbS5maWxlSWQ7CiAgICAgIF90aGlzLnJlbmFtZUZvcm0uZmlsZW5hbWUgPSBpdGVtLmZpbGVuYW1lOwogICAgICBfdGhpcy5yZW5hbWVEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBkb1JlbmFtZUZpbGU6IGZ1bmN0aW9uIGRvUmVuYW1lRmlsZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLiRyZWZzLnJlbmFtZUZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIGZpbGVTZXJ2aWNlLnVwZGF0ZSh7CiAgICAgICAgICAgIGZpbGVJZDogX3RoaXMucmVuYW1lRm9ybS5maWxlSWQsCiAgICAgICAgICAgIG5ld0ZpbGVuYW1lOiBfdGhpcy5yZW5hbWVGb3JtLmZpbGVuYW1lCiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMucmVuYW1lRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6YeN5ZG95ZCN5oiQ5YqfJyk7CgogICAgICAgICAgICBfdGhpcy5yZWxvYWRGaWxlTGlzdCgpOwogICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CgogICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZvY3VzSW5wdXQ6IGZ1bmN0aW9uIGZvY3VzSW5wdXQocmVmTmFtZSkgewogICAgICB0aGlzLiRyZWZzW3JlZk5hbWVdLmZvY3VzKCk7CiAgICB9LAogICAgcmVzZXRGb3JtOiBmdW5jdGlvbiByZXNldEZvcm0ocmVmTmFtZSkgewogICAgICB0aGlzLiRyZWZzW3JlZk5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICB9CiAgfSksCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydtdWx0aXBsZVNlbGVjdGlvbiddKSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIHdhdGNoOiB7fQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"rename-button-content\">\n        <el-button v-if=\"roundFlag\" type=\"warning\" :size=\"size\" round @click=\"renameFile\">\n            重命名<i class=\"el-icon-edit el-icon--right\"/>\n        </el-button>\n        <el-button v-if=\"circleFlag\" type=\"warning\" :size=\"size\" circle @click=\"renameFile\">\n            <i class=\"el-icon-edit\"/>\n        </el-button>\n        <el-dialog\n                title=\"文件重命名\"\n                :visible.sync=\"renameDialogVisible\"\n                width=\"30%\"\n                @opened=\"focusInput('filename')\"\n                @closed=\"resetForm('renameForm')\"\n                :append-to-body=true\n                :modal-append-to-body=false\n                :center=true>\n            <div>\n                <el-form label-width=\"100px\" :rules=\"renameRules\" ref=\"renameForm\"\n                         :model=\"renameForm\"\n                         status-icon\n                         @submit.native.prevent>\n                    <el-form-item label=\"文件名称\" prop=\"filename\">\n                        <el-input type=\"text\"\n                                  ref=\"filename\"\n                                  @keyup.enter.native=\"doRenameFile\"\n                                  v-model=\"renameForm.filename\" autocomplete=\"off\"/>\n                    </el-form-item>\n                </el-form>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"renameDialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"doRenameFile\" :loading=\"loading\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\n    import fileService from '../../../api/file'\n    import { mapActions, mapGetters } from 'vuex'\n\n    export default {\n        name: 'RenameButton',\n        components: {},\n        props: {\n            roundFlag: Boolean,\n            circleFlag: Boolean,\n            size: String,\n            item: Object\n        },\n        data() {\n            return {\n                renameRules: {\n                    filename: [\n                        {required: true, message: '请输入新文件名称', trigger: 'blur'}\n                    ]\n                },\n                renameForm: {\n                    fileId: '',\n                    filename: ''\n                },\n                renameDialogVisible: false,\n                loading: false\n            }\n        },\n        methods: {\n            ...mapActions({\n                reloadFileList: 'file/loadFileList'\n            }),\n            renameFile() {\n                let _this = this\n                if (_this.item) {\n                    _this.renameForm.fileId = _this.item.fileId\n                    _this.renameForm.filename = _this.item.filename\n                    _this.renameDialogVisible = true\n                    return\n                }\n                if (!_this.multipleSelection || _this.multipleSelection.length == 0) {\n                    _this.$message.error('请选择要重命名的文件')\n                    return\n                }\n                if (_this.multipleSelection.length > 1) {\n                    _this.$message.error('请选择一个文件进行重命名')\n                    return\n                }\n                let item = _this.multipleSelection[0]\n                _this.renameForm.fileId = item.fileId\n                _this.renameForm.filename = item.filename\n                _this.renameDialogVisible = true\n            },\n            doRenameFile() {\n                let _this = this\n                _this.$refs.renameForm.validate((valid) => {\n                    if (valid) {\n                        _this.loading = true\n                        fileService.update({\n                            fileId: _this.renameForm.fileId,\n                            newFilename: _this.renameForm.filename\n                        }, res => {\n                            _this.loading = false\n                            _this.renameDialogVisible = false\n                            _this.$message.success('重命名成功')\n                            _this.reloadFileList()\n                        }, res => {\n                            _this.$message.error(res.message)\n                            _this.loading = false\n                        })\n                    }\n                })\n            },\n            focusInput(refName) {\n                this.$refs[refName].focus()\n            },\n            resetForm(refName) {\n                this.$refs[refName].resetFields()\n            }\n        },\n        computed: {\n            ...mapGetters(['multipleSelection'])\n        },\n        mounted() {\n        },\n        watch: {}\n    }\n</script>\n\n<style>\n    .rename-button-content {\n        display: inline-block;\n        margin-right: 10px;\n    }\n</style>"],"sourceRoot":"src/components/buttons/rename-button"}]}