{"remainingRequest":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\components\\buttons\\transfer-button\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\components\\buttons\\transfer-button\\index.vue","mtime":1710063487764},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkU6L3NvZnR3YXJlL2Rvd25sb2FkL3ItcGFuLXNjYWZmb2xkaW5nLW1hc3Rlci9yLXBhbi1zY2FmZm9sZGluZy1tYXN0ZXIvci1wYW4tcG9ydGFsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpbGVTZXJ2aWNlIGZyb20gJy4uLy4uLy4uL2FwaS9maWxlJzsKaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RyYW5zZmVyQnV0dG9uJywKICBjb21wb25lbnRzOiB7fSwKICBwcm9wczogewogICAgcm91bmRGbGFnOiBCb29sZWFuLAogICAgY2lyY2xlRmxhZzogQm9vbGVhbiwKICAgIHNpemU6IFN0cmluZywKICAgIGl0ZW06IE9iamVjdAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRyZWVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdHJlZURhdGE6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyh7CiAgICByZWxvYWRGaWxlTGlzdDogJ2ZpbGUvbG9hZEZpbGVMaXN0JwogIH0pKSwge30sIHsKICAgIHRyYW5zZmVyRmlsZTogZnVuY3Rpb24gdHJhbnNmZXJGaWxlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFfdGhpcy5pdGVtICYmICghX3RoaXMubXVsdGlwbGVTZWxlY3Rpb24gfHwgX3RoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoID09IDApKSB7CiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeimgeenu+WKqOeahOaWh+S7ticpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIF90aGlzLnRyZWVEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBkb1RyYW5zZmVyRmlsZTogZnVuY3Rpb24gZG9UcmFuc2ZlckZpbGUodGFyZ2V0UGFyZW50SWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpcywKICAgICAgICAgIGZpbGVJZHMgPSAnJzsKCiAgICAgIGlmIChfdGhpcy5pdGVtKSB7CiAgICAgICAgZmlsZUlkcyA9IF90aGlzLml0ZW0uZmlsZUlkOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBmaWxlSWRBcnIgPSBuZXcgQXJyYXkoKTsKCiAgICAgICAgX3RoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGZpbGVJZEFyci5wdXNoKGl0ZW0uZmlsZUlkKTsKICAgICAgICB9KTsKCiAgICAgICAgZmlsZUlkcyA9IGZpbGVJZEFyci5qb2luKCdfXyxfXycpOwogICAgICB9CgogICAgICBmaWxlU2VydmljZS50cmFuc2Zlcih7CiAgICAgICAgZmlsZUlkczogZmlsZUlkcywKICAgICAgICB0YXJnZXRQYXJlbnRJZDogdGFyZ2V0UGFyZW50SWQKICAgICAgfSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy50cmVlRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmlofku7bnp7vliqjmiJDlip8nKTsKCiAgICAgICAgX3RoaXMucmVsb2FkRmlsZUxpc3QoKTsKICAgICAgfSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICB9KTsKICAgIH0sCiAgICBkb0Nob3NlVHJlZU5vZGVDYWxsQmFjazogZnVuY3Rpb24gZG9DaG9zZVRyZWVOb2RlQ2FsbEJhY2soKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHZhciBjaGVja05vZGUgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0Q3VycmVudE5vZGUoKTsKCiAgICAgIGlmICghY2hlY2tOb2RlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5paH5Lu25aS5Jyk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmRvVHJhbnNmZXJGaWxlKGNoZWNrTm9kZS5pZCk7CiAgICB9LAogICAgcmVzZXRUcmVlRGF0YTogZnVuY3Rpb24gcmVzZXRUcmVlRGF0YSgpIHsKICAgICAgdGhpcy50cmVlRGF0YSA9IG5ldyBBcnJheSgpOwogICAgfSwKICAgIGxvYWRUcmVlRGF0YTogZnVuY3Rpb24gbG9hZFRyZWVEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZmlsZVNlcnZpY2UuZ2V0Rm9sZGVyVHJlZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMudHJlZURhdGEgPSByZXMuZGF0YTsKICAgICAgfSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgfSk7CiAgICB9CiAgfSksCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydtdWx0aXBsZVNlbGVjdGlvbiddKSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIHdhdGNoOiB7fQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"transfer-button-content\">\n        <el-button v-if=\"roundFlag\" :size=\"size\" round @click=\"transferFile\">\n            移动到\n        </el-button>\n        <el-button v-if=\"circleFlag\" icon=\"el-icon-position\" :size=\"size\" circle @click=\"transferFile\">\n        </el-button>\n        <el-dialog\n                title=\"移动文件\"\n                :visible.sync=\"treeDialogVisible\"\n                @open=\"loadTreeData\"\n                @closed=\"resetTreeData\"\n                width=\"30%\"\n                :append-to-body=true\n                :modal-append-to-body=false\n                :center=true>\n            <div class=\"tree-content\">\n                <el-tree\n                        class=\"tree\"\n                        :data=\"treeData\"\n                        empty-text=\"暂无文件夹数据\"\n                        default-expand-all\n                        highlight-current\n                        check-on-click-node\n                        :expand-on-click-node=\"false\"\n                        ref=\"tree\">\n                    <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n                        <i class=\"fa fa-folder-o\" style=\"margin-right: 15px; font-size: 20px; cursor: pointer;\"/>\n                        <span>{{ node.label }}</span>\n                    </span>\n                </el-tree>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"treeDialogVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"doChoseTreeNodeCallBack\" :loading=\"loading\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\n    import fileService from '../../../api/file'\n    import { mapActions, mapGetters } from 'vuex'\n\n    export default {\n        name: 'TransferButton',\n        components: {},\n        props: {\n            roundFlag: Boolean,\n            circleFlag: Boolean,\n            size: String,\n            item: Object\n        },\n        data() {\n            return {\n                treeDialogVisible: false,\n                treeData: [],\n                loading: false\n            }\n        },\n        methods: {\n            ...mapActions({\n                reloadFileList: 'file/loadFileList'\n            }),\n            transferFile() {\n                let _this = this\n                if (!_this.item && (!_this.multipleSelection || _this.multipleSelection.length == 0)) {\n                    _this.$message.error('请选择要移动的文件')\n                    return\n                }\n                _this.treeDialogVisible = true\n            },\n            doTransferFile(targetParentId) {\n                let _this = this,\n                    fileIds = ''\n                if (_this.item) {\n                    fileIds = _this.item.fileId\n                } else {\n                    let fileIdArr = new Array()\n                    _this.multipleSelection.forEach(item => fileIdArr.push(item.fileId))\n                    fileIds = fileIdArr.join('__,__')\n                }\n                fileService.transfer({\n                    fileIds: fileIds,\n                    targetParentId: targetParentId\n                }, res => {\n                    _this.loading = false\n                    _this.treeDialogVisible = false\n                    _this.$message.success('文件移动成功')\n                    _this.reloadFileList()\n                }, res => {\n                    _this.loading = false\n                    _this.$message.error(res.message)\n                })\n            },\n            doChoseTreeNodeCallBack() {\n                this.loading = true\n                let checkNode = this.$refs.tree.getCurrentNode()\n                if (!checkNode) {\n                    this.$message.error('请选择文件夹')\n                    this.loading = false\n                    return\n                }\n                this.doTransferFile(checkNode.id)\n            },\n            resetTreeData() {\n                this.treeData = new Array()\n            },\n            loadTreeData() {\n                let _this = this\n                fileService.getFolderTree(res => {\n                    _this.treeData = res.data\n                }, res => {\n                    _this.$message.error(res.message)\n                })\n            }\n        },\n        computed: {\n            ...mapGetters(['multipleSelection'])\n        },\n        mounted() {\n        },\n        watch: {}\n    }\n</script>\n\n<style>\n\n    .transfer-button-content {\n        display: inline-block;\n        margin-right: 10px;\n    }\n\n    .tree-content {\n        height: 400px;\n    }\n\n    .tree-content .tree {\n        height: 100%;\n        overflow: auto;\n    }\n\n</style>"],"sourceRoot":"src/components/buttons/transfer-button"}]}