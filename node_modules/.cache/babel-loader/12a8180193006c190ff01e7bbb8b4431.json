{"remainingRequest":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\views\\preview\\video\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\views\\preview\\video\\index.vue","mtime":1710063489228},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5sYXN0LWluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUGFuU2ltcGxlSGVhZGVyIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvc2ltcGxlLWhlYWRlcic7CmltcG9ydCBmaWxlU2VydmljZSBmcm9tICcuLi8uLi8uLi9hcGkvZmlsZSc7CmltcG9ydCBwYW5VdGlsIGZyb20gJy4uLy4uLy4uL3V0aWxzL2NvbW1vbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVmlkZW8nLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aWRlb05hbWU6ICcnLAogICAgICBhY3RpdmVJbmRleDogJycsCiAgICAgIHZpZGVvU2hvd1BhdGg6ICcnLAogICAgICB2aWRlb0xpc3Q6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgUGFuU2ltcGxlSGVhZGVyOiBQYW5TaW1wbGVIZWFkZXIKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBmaWxlU2VydmljZS5saXN0KHsKICAgICAgICBwYXJlbnRJZDogX3RoaXMuJHJvdXRlLnBhcmFtcy5wYXJlbnRJZCwKICAgICAgICBmaWxlVHlwZXM6ICc5JwogICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDApIHsKICAgICAgICAgIF90aGlzLnJlbmRlclZpZGVvTGlzdChyZXMuZGF0YSk7CgogICAgICAgICAgX3RoaXMubGlzdGVuVmlkZW9QbGF5ZXIoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSwgZnVuY3Rpb24gKGVycikgewogICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdFZpZGVvOiBmdW5jdGlvbiBzZWxlY3RWaWRlbyhpbmRleCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleDsKICAgICAgdGhpcy52aWRlb0xpc3Quc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLmZpbGVJZCA9PT0gaW5kZXgpIHsKICAgICAgICAgIF90aGlzMi52aWRlb05hbWUgPSBpdGVtLmZpbGVOYW1lOwogICAgICAgICAgX3RoaXMyLnZpZGVvU2hvd1BhdGggPSBwYW5VdGlsLmdldFByZXZpZXdVcmwoaXRlbS5maWxlSWQpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZW5kZXJWaWRlb0xpc3Q6IGZ1bmN0aW9uIHJlbmRlclZpZGVvTGlzdChkYXRhTGlzdCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMudmlkZW9MaXN0ID0gbmV3IEFycmF5KCk7CiAgICAgIGRhdGFMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaXRlbS5maWxlbmFtZSA9IGl0ZW0uZmlsZW5hbWUuc3Vic3RyaW5nKDAsIGl0ZW0uZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSk7CgogICAgICAgIGlmIChpdGVtLmZpbGVuYW1lLmxlbmd0aCA+IDE1KSB7CiAgICAgICAgICBpdGVtLmZpbGVuYW1lID0gaXRlbS5maWxlbmFtZS5zdWJzdHJpbmcoMCwgMTYpICsgJy4uLic7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXRlbS5maWxlSWQgPT09IF90aGlzLiRyb3V0ZS5wYXJhbXMuZmlsZUlkKSB7CiAgICAgICAgICBfdGhpcy52aWRlb05hbWUgPSBpdGVtLmZpbGVuYW1lOwogICAgICAgICAgX3RoaXMudmlkZW9TaG93UGF0aCA9IHBhblV0aWwuZ2V0UHJldmlld1VybChpdGVtLmZpbGVJZCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy52aWRlb0xpc3QucHVzaChpdGVtKTsKCiAgICAgICAgX3RoaXMuYWN0aXZlSW5kZXggPSBfdGhpcy4kcm91dGUucGFyYW1zLmZpbGVJZDsKICAgICAgfSk7CiAgICB9LAogICAgbGlzdGVuVmlkZW9QbGF5ZXI6IGZ1bmN0aW9uIGxpc3RlblZpZGVvUGxheWVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JfcGFuX3ZpZGVvX3BsYXllcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnNlbGVjdE5leHQoX3RoaXMuYWN0aXZlSW5kZXgpOwogICAgICB9LCBmYWxzZSk7CiAgICB9LAogICAgc2VsZWN0TmV4dDogZnVuY3Rpb24gc2VsZWN0TmV4dChjdXJyZW50RmlsZUlkKSB7CiAgICAgIHZhciBpOwogICAgICB0aGlzLnZpZGVvTGlzdC5zb21lKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpdGVtLmZpbGVJZCA9PT0gY3VycmVudEZpbGVJZCkgewogICAgICAgICAgaSA9IGluZGV4OwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGlmIChpID09PSB0aGlzLnZpZGVvTGlzdC5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXRlbSA9IHRoaXMudmlkZW9MaXN0WysraV07CiAgICAgIHRoaXMudmlkZW9OYW1lID0gaXRlbS5maWxlbmFtZTsKICAgICAgdGhpcy52aWRlb1Nob3dQYXRoID0gcGFuVXRpbC5nZXRQcmV2aWV3VXJsKGl0ZW0uZmlsZUlkKTsKICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGl0ZW0uZmlsZUlkOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8v56Gu5L+d6aG16Z2i5YWD57Sg5Yqg6L295a6M5oiQ5LmL5ZCO6LCD55SoCiAgICB0aGlzLmluaXQoKTsKICB9LAogIHdhdGNoOiB7fQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["/**\n* Created by rubin on 2020/7/5.\n*/\n\n<template>\n    <div>\n        <pan-simple-header/>\n        <div class=\"pan-video-content\">\n            <div class=\"video-name-content\">\n                <p class=\"video-name\">{{ videoName }}</p>\n            </div>\n            <el-divider></el-divider>\n            <el-row>\n                <el-col :span=\"18\">\n                    <!--视频播放容器-->\n                    <div class=\"video-content\">\n                        <video id=\"r_pan_video_player\" :src=\"videoShowPath\" autoplay=\"true\" controls=\"true\"/>\n                    </div>\n                </el-col>\n                <el-col :span=\"6\">\n                    <div class=\"video-list-content\">\n                        <el-menu class=\"video-list\"\n                                 :default-active=\"activeIndex\"\n                                 @select=\"selectVideo\">\n                            <el-menu-item v-for=\"(item, index) in videoList\" :key=\"index\" :index=\"item.fileId\">\n                                <i class=\"fa fa-video-camera\"></i>\n                                <span slot=\"title\">{{ item.filename }}</span>\n                            </el-menu-item>\n                        </el-menu>\n                    </div>\n                </el-col>\n            </el-row>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import PanSimpleHeader from '../../../components/simple-header'\n    import fileService from '../../../api/file'\n    import panUtil from '../../../utils/common'\n\n    export default {\n        name: 'Video',\n        data() {\n            return {\n                videoName: '',\n                activeIndex: '',\n                videoShowPath: '',\n                videoList: []\n            }\n        },\n        components: { PanSimpleHeader },\n        methods: {\n            init() {\n                let _this = this\n                fileService.list({\n                    parentId: _this.$route.params.parentId,\n                    fileTypes: '9'\n                }, function (res) {\n                    if (res.status === 0) {\n                        _this.renderVideoList(res.data)\n                        _this.listenVideoPlayer()\n                    } else {\n                        _this.$message.error(res.message)\n                    }\n                }, function (err) {\n                    _this.$message.error(err)\n                })\n            },\n            selectVideo(index) {\n                this.activeIndex = index\n                this.videoList.some(item => {\n                    if (item.fileId === index) {\n                        this.videoName = item.fileName\n                        this.videoShowPath = panUtil.getPreviewUrl(item.fileId)\n                        return true\n                    }\n                })\n            },\n            renderVideoList(dataList) {\n                let _this = this\n                _this.videoList = new Array()\n                dataList.forEach((item, index) => {\n                    item.filename = item.filename.substring(0, item.filename.lastIndexOf('.'))\n                    if (item.filename.length > 15) {\n                        item.filename = item.filename.substring(0, 16) + '...'\n                    }\n                    if (item.fileId === _this.$route.params.fileId) {\n                        _this.videoName = item.filename\n                        _this.videoShowPath = panUtil.getPreviewUrl(item.fileId)\n                    }\n                    _this.videoList.push(item)\n                    _this.activeIndex = _this.$route.params.fileId\n                })\n            },\n            listenVideoPlayer() {\n                let _this = this\n                document.getElementById('r_pan_video_player').addEventListener('ended', () => {\n                    _this.selectNext(_this.activeIndex)\n                }, false)\n            },\n            selectNext(currentFileId) {\n                let i\n                this.videoList.some((item, index) => {\n                    if (item.fileId === currentFileId) {\n                        i = index\n                        return true\n                    }\n                })\n                if (i === this.videoList.length - 1) {\n                    return\n                }\n                let item = this.videoList[++i]\n                this.videoName = item.filename\n                this.videoShowPath = panUtil.getPreviewUrl(item.fileId)\n                this.activeIndex = item.fileId\n            }\n        },\n        mounted() {\n            //确保页面元素加载完成之后调用\n            this.init()\n        },\n        watch: {}\n    }\n</script>\n\n<style scoped>\n\n    .pan-video-content {\n        width: 100%;\n        margin-top: 62px;\n        display: block;\n    }\n\n    .pan-video-content .video-name-content {\n        display: block;\n        width: 100%;\n        text-align: center;\n        padding: 10px 0 0 0;\n    }\n\n    .pan-video-content .video-name-content .video-name {\n        color: #409EFF;\n        font-size: 35px;\n        font-weight: bold;\n        font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\n    }\n\n    .pan-video-content .video-content {\n        width: 100%;\n        height: 100px;\n        display: block;\n        text-align: center;\n    }\n\n    .pan-video-content .video-content #r_pan_video_player {\n        display: inline-block;\n        width: 100%;\n        height: 500px;\n        line-height: 500px;\n    }\n\n    .pan-video-content .video-list-content {\n        display: block;\n        margin: 0 auto;\n        width: 250px;\n        height: 500px;\n        line-height: 500px;\n        overflow: hidden;\n    }\n\n    .pan-video-content .video-list-content .video-list {\n        width: 100%;\n        height: 100%;\n        overflow: scroll;\n    }\n\n    .pan-video-content .video-list i {\n        margin-right: 15px;\n    }\n\n</style>\n"],"sourceRoot":"src/views/preview/video"}]}