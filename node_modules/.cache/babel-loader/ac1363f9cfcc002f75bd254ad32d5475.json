{"remainingRequest":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\views\\preview\\music\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\src\\views\\preview\\music\\index.vue","mtime":1710063489156},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\software\\download\\r-pan-scaffolding-master\\r-pan-scaffolding-master\\r-pan-portal\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5sYXN0LWluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUGFuU2ltcGxlSGVhZGVyIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvc2ltcGxlLWhlYWRlcic7CmltcG9ydCBmaWxlU2VydmljZSBmcm9tICcuLi8uLi8uLi9hcGkvZmlsZSc7CmltcG9ydCBwYW5VdGlsIGZyb20gJy4uLy4uLy4uL3V0aWxzL2NvbW1vbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTXVzaWMnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtdXNpY05hbWU6ICcnLAogICAgICBtdXNpY0xpc3Q6IFtdLAogICAgICBtdXNpY1Nob3dQYXRoOiAnJywKICAgICAgYWN0aXZlSW5kZXg6ICcwJwogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFBhblNpbXBsZUhlYWRlcjogUGFuU2ltcGxlSGVhZGVyCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZmlsZVNlcnZpY2UubGlzdCh7CiAgICAgICAgcGFyZW50SWQ6IF90aGlzLiRyb3V0ZS5wYXJhbXMucGFyZW50SWQsCiAgICAgICAgZmlsZVR5cGVzOiAnOCcKICAgICAgfSwgZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnJlbmRlck11c2ljTGlzdChyZXMuZGF0YSk7CgogICAgICAgIF90aGlzLmxpc3Rlbk11c2ljUGxheWVyKCk7CiAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdE11c2ljOiBmdW5jdGlvbiBzZWxlY3RNdXNpYyhpbmRleCwgaW5kZXhQYXRoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB0aGlzLm11c2ljTGlzdC5zb21lKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uZmlsZUlkID09PSBpbmRleCkgewogICAgICAgICAgX3RoaXMyLm11c2ljTmFtZSA9IGl0ZW0uZmlsZW5hbWU7CiAgICAgICAgICBfdGhpczIubXVzaWNTaG93UGF0aCA9IHBhblV0aWwuZ2V0UHJldmlld1VybChpdGVtLmZpbGVJZCk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbmRlck11c2ljTGlzdDogZnVuY3Rpb24gcmVuZGVyTXVzaWNMaXN0KGRhdGFMaXN0KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5tdXNpY0xpc3QgPSBuZXcgQXJyYXkoKTsKICAgICAgZGF0YUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpdGVtLmZpbGVuYW1lID0gaXRlbS5maWxlbmFtZS5zdWJzdHJpbmcoMCwgaXRlbS5maWxlbmFtZS5sYXN0SW5kZXhPZignLicpKTsKCiAgICAgICAgaWYgKGl0ZW0uZmlsZW5hbWUubGVuZ3RoID4gMTUpIHsKICAgICAgICAgIGl0ZW0uZmlsZW5hbWUgPSBpdGVtLmZpbGVuYW1lLnN1YnN0cmluZygwLCAxNikgKyAnLi4uJzsKICAgICAgICB9CgogICAgICAgIGlmIChpdGVtLmZpbGVJZCA9PT0gX3RoaXMuJHJvdXRlLnBhcmFtcy5maWxlSWQpIHsKICAgICAgICAgIF90aGlzLm11c2ljTmFtZSA9IGl0ZW0uZmlsZW5hbWU7CiAgICAgICAgICBfdGhpcy5tdXNpY1Nob3dQYXRoID0gcGFuVXRpbC5nZXRQcmV2aWV3VXJsKGl0ZW0uZmlsZUlkKTsKICAgICAgICB9CgogICAgICAgIF90aGlzLm11c2ljTGlzdC5wdXNoKGl0ZW0pOwoKICAgICAgICBfdGhpcy5hY3RpdmVJbmRleCA9IF90aGlzLiRyb3V0ZS5wYXJhbXMuZmlsZUlkOwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3ROZXh0OiBmdW5jdGlvbiBzZWxlY3ROZXh0KGN1cnJlbnRGaWxlSWQpIHsKICAgICAgdmFyIGk7CiAgICAgIHRoaXMubXVzaWNMaXN0LnNvbWUoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKGl0ZW0uZmlsZUlkID09PSBjdXJyZW50RmlsZUlkKSB7CiAgICAgICAgICBpID0gaW5kZXg7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKGkgPT09IHRoaXMubXVzaWNMaXN0Lmxlbmd0aCAtIDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gdGhpcy5tdXNpY0xpc3RbKytpXTsKICAgICAgdGhpcy5tdXNpY05hbWUgPSBpdGVtLmZpbGVuYW1lOwogICAgICB0aGlzLm11c2ljU2hvd1BhdGggPSBwYW5VdGlsLmdldFByZXZpZXdVcmwoaXRlbS5maWxlSWQpOwogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaXRlbS5maWxlSWQ7CiAgICB9LAogICAgbGlzdGVuTXVzaWNQbGF5ZXI6IGZ1bmN0aW9uIGxpc3Rlbk11c2ljUGxheWVyKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JfcGFuX211c2ljX3BsYXllcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnNlbGVjdE5leHQoX3RoaXMuYWN0aXZlSW5kZXgpOwogICAgICB9LCBmYWxzZSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy/noa7kv53pobXpnaLlhYPntKDliqDovb3lrozmiJDkuYvlkI7osIPnlKgKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgd2F0Y2g6IHt9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["/**\n* Created by rubin on 2020/7/5.\n*/\n\n<template>\n    <div>\n        <pan-simple-header/>\n        <div class=\"pan-music-content\">\n            <div class=\"music-name-content\">\n                <p class=\"music-name\">{{musicName}}</p>\n            </div>\n            <el-divider></el-divider>\n            <el-row>\n                <el-col :span=\"18\">\n                    <div class=\"record-img-content\">\n                        <img class=\"record-img\" src=\"@/assets/imgs/record.png\">\n                    </div>\n                    <!--音频播放容器-->\n                    <div class=\"music-content\">\n                        <audio id=\"r_pan_music_player\" :src=\"musicShowPath\" autoplay=\"true\" controls=\"true\"/>\n                    </div>\n                </el-col>\n                <el-col :span=\"6\">\n                    <div class=\"music-list-content\">\n                        <el-menu class=\"music-list\"\n                                 :default-active=\"activeIndex\"\n                                 @select=\"selectMusic\">\n                            <el-menu-item v-for=\"(item, index) in musicList\" :key=\"index\" :index=\"item.fileId\">\n                                <i class=\"fa fa-music\"></i>\n                                <span slot=\"title\">{{ item.filename }}</span>\n                            </el-menu-item>\n                        </el-menu>\n                    </div>\n                </el-col>\n            </el-row>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import PanSimpleHeader from '../../../components/simple-header'\n    import fileService from '../../../api/file'\n    import panUtil from '../../../utils/common'\n\n    export default {\n        name: 'Music',\n        data() {\n            return {\n                musicName: '',\n                musicList: [],\n                musicShowPath: '',\n                activeIndex: '0'\n            }\n        },\n        components: { PanSimpleHeader },\n        methods: {\n            init() {\n                let _this = this\n                fileService.list({\n                    parentId: _this.$route.params.parentId,\n                    fileTypes: '8'\n                }, res => {\n                    _this.renderMusicList(res.data)\n                    _this.listenMusicPlayer()\n                }, res => {\n                    _this.$message.error(res.message)\n                })\n            },\n            selectMusic(index, indexPath) {\n                this.activeIndex = index\n                this.musicList.some(item => {\n                    if (item.fileId === index) {\n                        this.musicName = item.filename\n                        this.musicShowPath = panUtil.getPreviewUrl(item.fileId)\n                        return true\n                    }\n                })\n            },\n            renderMusicList(dataList) {\n                let _this = this\n                _this.musicList = new Array()\n                dataList.forEach((item, index) => {\n                    item.filename = item.filename.substring(0, item.filename.lastIndexOf('.'))\n                    if (item.filename.length > 15) {\n                        item.filename = item.filename.substring(0, 16) + '...'\n                    }\n                    if (item.fileId === _this.$route.params.fileId) {\n                        _this.musicName = item.filename\n                        _this.musicShowPath = panUtil.getPreviewUrl(item.fileId)\n                    }\n                    _this.musicList.push(item)\n                    _this.activeIndex = _this.$route.params.fileId\n                })\n            },\n            selectNext(currentFileId) {\n                let i\n                this.musicList.some((item, index) => {\n                    if (item.fileId === currentFileId) {\n                        i = index\n                        return true\n                    }\n                })\n                if (i === this.musicList.length - 1) {\n                    return\n                }\n                let item = this.musicList[++i]\n                this.musicName = item.filename\n                this.musicShowPath = panUtil.getPreviewUrl(item.fileId)\n                this.activeIndex = item.fileId\n            },\n            listenMusicPlayer() {\n                let _this = this\n                document.getElementById('r_pan_music_player').addEventListener('ended', () => {\n                    _this.selectNext(_this.activeIndex)\n                }, false)\n            }\n        },\n        mounted() {\n            //确保页面元素加载完成之后调用\n            this.init()\n        },\n        watch: {}\n    }\n</script>\n\n<style scoped>\n    .pan-music-content {\n        width: 100%;\n        margin-top: 62px;\n        display: block;\n    }\n\n    .pan-music-content .music-name-content {\n        display: block;\n        width: 100%;\n        text-align: center;\n        padding: 10px 0 0 0;\n    }\n\n    .pan-music-content .music-name-content .music-name {\n        color: #409EFF;\n        font-size: 35px;\n        font-weight: bold;\n        font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\n    }\n\n    .pan-music-content .record-img-content {\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        margin-top: 80px;\n        text-align: center;\n    }\n\n    .pan-music-content .record-img-content .record-img {\n        width: 300px;\n    }\n\n    .pan-music-content .music-content {\n        width: 100%;\n        height: 100px;\n        display: block;\n        margin-top: 60px;\n        text-align: center;\n        position: relative;\n    }\n\n    .pan-music-content .music-content #r_pan_music_player {\n        display: inline-block;\n        width: 100%;\n        position: absolute;\n        bottom: 10px;\n        left: 0;\n    }\n\n    .pan-music-content .music-list-content {\n        display: block;\n        margin: 0 auto;\n        width: 250px;\n        height: 500px;\n        line-height: 500px;\n        overflow: hidden;\n    }\n\n    .pan-music-content .music-list-content .music-list {\n        width: 100%;\n        height: 100%;\n        overflow: scroll;\n    }\n\n    .pan-music-content .music-list i {\n        margin-right: 15px;\n    }\n\n</style>\n"],"sourceRoot":"src/views/preview/music"}]}